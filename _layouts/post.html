---
layout: default
title: "{{ page.title }}"
---

<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
<meta itemprop="headline" content="{{ page.title }}">

    <h2>{{ page.title }}</h2>
    {% if page.date %}
    <p class="post-meta date"><i>{{ page.date | date_to_string }}</i></p>
    {% endif %}

    {% if page.industry %}
    <p class="post-meta"><b>Industries:</b> {{ page.industry | join: ', ' }}</p>
    {% endif %}

    {% if page.impact %}
    <p class="post-meta"><b>Impacts:</b> {{ page.impact | join: ', ' }}</p>
    {% endif %}

    {% if page.category %}
    <p class="post-meta"><b>Category:</b> {{ page.category | default: page.categories | join: ', ' }}</p>
    {% endif %}

    {% if page.supply_chain %}
    <p class="post-meta"><b>Supply Chain:</b> {{ page.supply_chain | join: ' â†’ ' }}</p>
    {% endif %}

    {% if page.tags %}
    <p class="post-meta"><b>Tags:</b> {{ page.tags | join: ', ' }}</p>
    {% endif %}

    <img src="{{ page.image }}" alt="Post Image" class="blog-hero-image" />

    {{ content }}

    {% if page.sources %}
    <p class="post-meta"><b>Sources:</b></p>
    <ul class="ref-list">
        {% for src in page.sources %}
        <li class="post-meta"><a href="{{ src.url }}" target="_blank">{{ src.name }}</a></li>
        {% endfor %}
    </ul>
    {% endif %}

    <hr>


    {% comment %}=====================================================================
    RELATED POSTS
    ====================================================================={% endcomment %}
    
    {% assign related_posts = site.posts | where_exp: "p", "p != page" %}
    {% assign match_list = "" %}
    
    {% for post in related_posts %}
    {% assign score = 0 %}
    
    {% if page.industry and post.industry %}
    {% for i in page.industry %}
    {% if post.industry contains i %}
    {% assign score = score | plus: 1 %}
    {% endif %}
    {% endfor %}
    {% endif %}
    
    {% if page.impact and post.impact %}
    {% for i in page.impact %}
    {% if post.impact contains i %}
    {% assign score = score | plus: 1 %}
    {% endif %}
    {% endfor %}
    {% endif %}
    
    {% if score == 0 and page.tags and post.tags %}
    {% for t in page.tags %}
    {% if post.tags contains t %}
    {% assign score = score | plus: 1 %}
    {% endif %}
    {% endfor %}
    {% endif %}
    
    {% if score > 0 %}
    {% comment %} store: score|post-url|post-title|post-date {% endcomment %}
    {% assign entry = score | append: "|" | append: post.url | append: "|" | append: post.title | append: "|" | append:
    post.date %}
    {% assign match_list = match_list | append: entry | append: "||" %}
    {% endif %}
    {% endfor %}
    
    {% if match_list != "" %}
    {% assign entries = match_list | split: "||" %}
    {% assign sorted = entries | sort | reverse %} <!-- sort by score (string) -->
    {% assign top3 = sorted | slice: 0, 3 %}
    
    <div class="related-posts">
        <h3>Related Insights</h3>
        <ul class="listing-grid">
            {% for e in top3 %}
            {% assign parts = e | split: "|" %}
            {% assign post_url = parts[1] %}
            {% assign post_title = parts[2] %}
            {% assign post_date = parts[3] %}
        
            {% assign related_post = site.posts | where: "url", post_url | first %}
        
            <li data-post-url="{{ related_post.url }}">
                {% if related_post.image %}
                <img class="image-thumbnail" src="{{ related_post.image | relative_url }}"
                    alt="Thumbnail for {{ related_post.title | escape }}" />
                {% else %}
                <img class="image-thumbnail" src="/src/Assets/default-thumb.jpg" alt="Default thumbnail" />
                {% endif %}

                <a href="{{ related_post.url | relative_url }}"><h5>{{ related_post.title }}</h5></a>

                <span class="meta-block">
                    {% if related_post.industry %}
                    <p class="post-meta">
                        <b>Industries:</b> {{ related_post.industry | join: ', ' }}
                    </p>
                    {% endif %}
            
                    {% if related_post.impact %}
                    <p class="post-meta">
                        <b>Impacts:</b> {{ related_post.impact | join: ', ' }}
                    </p>
                    {% endif %}
                </span>
                <a href="{{ related_post.url | relative_url }}" class="panel-cta-link"><button class="btn-tertiary">Read More</button></a>
            </li>
            {% endfor %}     
        </ul>
    </div>
    {% endif %}

</article>